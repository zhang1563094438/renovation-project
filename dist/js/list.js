"use strict";function asyncGeneratorStep(t,n,a,e,o,r,s){try{var c=t[r](s),i=c.value}catch(t){return void a(t)}c.done?n(i):Promise.resolve(i).then(e,o)}function _asyncToGenerator(c){return function(){var t=this,s=arguments;return new Promise(function(n,a){var e=c.apply(t,s);function o(t){asyncGeneratorStep(e,n,a,o,r,"next",t)}function r(t){asyncGeneratorStep(e,n,a,o,r,"throw",t)}o(void 0)})}}$(function(){var e=null,o={cat_one:"all",cat_two:"all",cat_three:"all",sort_method:"综合",sort_type:"ASC",current:1,pagesize:12};function t(){return(t=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/zhang/getOne.php",null,null,"json");case 2:n=t.sent,a='<span data-type="all" class="active">全部</span>',n.list.forEach(function(t){a+='\n          <span data-type="'.concat(t.cat_one_id,'">').concat(t.cat_one_id,"</span>\n        ")}),$(".onebox > .right").html(a);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function n(){return(n=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/zhang/getTwo.php",{cat_one:o.cat_one},null,"json");case 2:n=t.sent,a='<span data-type="all" class="active">全部</span>',n.list.forEach(function(t){a+='<span data-type="'.concat(t.cat_two_id,'">').concat(t.cat_two_id,"</span>")}),$(".twobox .right").html(a);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function a(){return(a=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/zhang/getThree.php",{cat_one:o.cat_one,cat_two:o.cat_two},null,"json");case 2:n=t.sent,a='<span data-type="all" class="active">全部</span>',n.list.forEach(function(t){a+='<span data-type="'.concat(t.cat_three_id,'">').concat(t.cat_three_id,"</span>")}),$(".threebox .right").html(a);case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}function r(){return s.apply(this,arguments)}function s(){return(s=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/zhang/getTotalPage.php",o,null,"json");case 2:n=t.sent,$(".pagination").pagination({pageCount:n.total,callback:function(t){o.current=t.getCurrent(),c()}});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function c(){return i.apply(this,arguments)}function i(){return(i=_asyncToGenerator(regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.get("/zhang/getGoodsList.php",o,null,"json");case 2:n=t.sent,e=n.list,a="",n.list.forEach(function(t){a+='\n          <li class="thumbnail">\n            <img src="'.concat(t.goods_big_logo,'" data-id="').concat(t.goods_id,'" alt="...">\n            <div class="god" ><img src="').concat(t.goods_small_logo,'"><img src="../images/logo.png"></div>\n            <div class="caption">\n              <h3 data-id="').concat(t.goods_id,'">').concat(t.goods_name,'</h3>\n              <p class="price">￥\n                <span class="text-danger" data-id="').concat(t.goods_id,'" >').concat(t.goods_price,"</span>\n                <span> ID: ").concat(t.goods_id,' </span>\n              </p>\n              <p>\n                <a href="javascript:;" class="btn btn-danger addCart" role="button" data-id="').concat(t.goods_id,'">加入购物车</a>\n                <a href="./cart.html" class="btn btn-warning" role="button">去结算</a>\n              </p>\n            </div>\n          </li>\n        ')}),$(".goodsList > ul").html(a);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}(),r(),c(),$(".onebox").on("click","span",function(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).data("type");o.cat_two="all",o.cat_three="all",o.current=1,o.cat_one=t,r(),c(),$(".threebox .right").html('<span data-type="all" class="active">全部</span>'),"all"===t?$(".twobox .right").html('<span data-type="all" class="active">全部</span>'):function(){n.apply(this,arguments)}()}),$(".twobox").on("click","span",function(){var t=$(this).data("type");$(this).addClass("active").siblings().removeClass("active"),o.cat_three="all",o.current=1,o.cat_two=t,r(),c(),"all"===t?$(".threebox .right").html('<span data-type="all" class="active">全部</span>'):function(){a.apply(this,arguments)}()}),$(".threebox").on("click","span",function(){var t=$(this).data("type");$(this).addClass("active").siblings().removeClass("active"),o.cat_three=t,o.current=1,r(),c()}),$(".sortbox").on("click","span",function(){var t=$(this).attr("data-method"),n=$(this).attr("data-type");$(this).addClass("active").siblings().removeClass("active"),o.sort_method=t,o.sort_type=n,r(),c(),$(this).attr("data-type","ASC"===n?"DESC":"ASC").siblings().attr("data-type","ASC")}),$(".goodsList ul").on("click","img",function(){var t=$(this).data("id");console.log(t),setCookie("goods_id",t),window.location.href="./details.html"}),$(".goodsList ul").on("click","h3",function(){var t=$(this).data("id");console.log(t),setCookie("goods_id",t),window.location.href="../details.html"}),$(".goodsList").on("click",".addCart",function(){var t,n=JSON.parse(window.localStorage.getItem("cart"))||[],a=$(this).data("id");n.some(function(t){return t.goods_id==a})?(t=n.filter(function(t){return t.goods_id==a})[0]).cart_number=+t.cart_number+1:((t=e.filter(function(t){return t.goods_id==a})[0]).cart_number=1,n.push(t)),window.localStorage.setItem("cart",JSON.stringify(n))})});