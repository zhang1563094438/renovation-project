"use strict";function _templateObject(){var n=_taggedTemplateLiteral([""]);return _templateObject=function(){return n},n}function _taggedTemplateLiteral(n,t){return t=t||n.slice(0),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}$(function(){var n=getCookie("nickname");if(!n)return window.location.href="./login.html";$(".ob").addClass("hide"),$(".oa").removeClass("hide").text(" 您好：".concat(n));var c=JSON.parse(window.localStorage.getItem("cart"))||[];if(!c.length)return $(".on").addClass("hide"),void $(".off").removeClass("hide");function e(){var n=c.every(function(n){return"1"==n.is_select}),t=0,e=0;c.forEach(function(n){"1"==n.is_select&&(t+=+n.cart_number,e+=n.cart_number*n.goods_price)});var a='\n        <div class="panel panel-info">\n        <div class="panel-heading">\n          <p class="selectAll">\n            <span>全选:</span>\n            <input type="checkbox" '.concat(n?"checked":"",'>\n            <span class="text">购 物 清 单</span>\n          </p>\n        </div>\n        <div class="panel-body">\n          <ul class="goodsList">\n        ');c.forEach(function(n){a+='\n            <li>\n          <div class="select">\n            <input data-id="'.concat(n.goods_id,'" type="checkbox" ').concat("0"==n.is_select?"":"checked",'>\n          </div>\n          <div class="goodsImg">\n            <img src="').concat(n.goods_small_logo,'" alt="">\n          </div>\n          <div class="goodsDesc">\n            <p>').concat(n.goods_name,'</p>\n          </div>\n          <div class="price">\n            ￥ <span class="text-danger">').concat(n.goods_price,'</span>\n          </div>\n          <div class="count">\n            <button class="subNum" data-id="').concat(n.goods_id,'">-</button>\n            <input type="text" value="').concat(n.cart_number,'">\n            <button class="addNum" data-id="').concat(n.goods_id,'">+</button>\n          </div>\n          <div class="xiaoji">\n            ￥ <span class="text-danger">').concat((n.goods_price*n.cart_number).toFixed(2),'</span>\n          </div>\n          <div class="operate">\n            <button class="btn btn-danger del" data-id="').concat(n.goods_id,'">删除</button>\n          </div>\n        </li>\n            ')}),a+='\n        </ul>\n        </div>\n        <div class="panel-footer">\n          <div class="row buyInfo">\n            <p class="col-sm-4 buyNum">\n              购买总数量: <span class="text-danger cartNum">'.concat(t,'</span> 件商品\n            </p>\n            <p class="col-sm-4 buyMoney">\n              购买总价格: <span class="text-danger total">').concat(e.toFixed(2),'</span> 元\n            </p>\n            <p class="col-sm-4 operate">\n              <button class="btn btn-success" ').concat(0===e?"disabled":"",'>立即付款</button>\n              <button class="btn btn-danger delete">清空购物车</button>\n              <button class="btn btn-primary"><a href="./list.html">继续购物</a></button>\n            </p>\n          </div>\n        </div>\n      </div>\n        '),$(".on").html(a)}$(".off").addClass("hide"),$(".on").removeClass("hide"),e(),$(".on").on("click",".select > input",function(){var n=this.checked,t=$(this).data("id");c.filter(function(n){return n.goods_id==t})[0].is_select=n?"1":"0",e(),window.localStorage.setItem("cart",JSON.stringify(c))}),$(".on").on("click",".selectAll > span",function(){for(var n=this.checked,t=0;t<c.length;t++)c[t].checked=n}),$(".on").on("click",".selectAll > input",function(){if(this.checked)for(var n=0;n<c.length;n++)c[n].is_select=1;else for(var t=0;t<c.length;t++)c[t].is_select=0;e()}),$(".on").on("click",".addNum",function(){var t=$(this).data("id"),n=c.filter(function(n){return n.goods_id==t})[0];n.cart_number=+n.cart_number+1,e(),window.localStorage.setItem("cart",JSON.stringify(c))}),$(".on").on("click",".subNum",function(){var t=$(this).data("id"),n=c.filter(function(n){return n.goods_id==t})[0];1!==n.cart_number&&(n.cart_number=+n.cart_number-1,e(),window.localStorage.setItem("cart",JSON.stringify(c)))}),$(".on").on("click",".del",function(){for(var n=$(this).data("id"),t=0;t<c.length;t++)if(c[t].goods_id==n){c.splice(t,1)(_templateObject());break}if(e(),window.localStorage.setItem("cart",JSON.stringify(c)),!c.length)return window.location.reload()}),$(".on").on("click",".delete",function(){for(var n=0;n<c.length;n++)c.splice(n);if(e(),window.localStorage.setItem("cart",JSON.stringify(c)),!c.length)return window.location.reload()})});